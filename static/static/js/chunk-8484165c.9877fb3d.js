(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8484165c"],{"06c7":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return i}));var o=a("1bab");function r(e){return Object(o["a"])({url:"/invoice",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/invoice",method:"put",data:e})}function l(e){return Object(o["a"])({url:"/invoice/",method:"get",data:e})}function c(e){return Object(o["a"])({url:"/invoice/all/"+e.project_code,method:"get",data:e})}function i(e){return Object(o["a"])({url:"/invoice/one/"+e.invoice_code,method:"get",data:e})}},1276:function(e,t,a){"use strict";var o=a("d784"),r=a("44e7"),n=a("825a"),l=a("1d80"),c=a("4840"),i=a("8aa5"),s=a("50c4"),u=a("14c3"),m=a("9263"),d=a("9f7f"),p=d.UNSUPPORTED_Y,f=[].push,_=Math.min,b=4294967295;o("split",2,(function(e,t,a){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var o=String(l(this)),n=void 0===a?b:a>>>0;if(0===n)return[];if(void 0===e)return[o];if(!r(e))return t.call(o,e,n);var c,i,s,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,_=new RegExp(e.source,d+"g");while(c=m.call(_,o)){if(i=_.lastIndex,i>p&&(u.push(o.slice(p,c.index)),c.length>1&&c.index<o.length&&f.apply(u,c.slice(1)),s=c[0].length,p=i,u.length>=n))break;_.lastIndex===c.index&&_.lastIndex++}return p===o.length?!s&&_.test("")||u.push(""):u.push(o.slice(p)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=l(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r,a):o.call(String(r),t,a)},function(e,r){var l=a(o,e,this,r,o!==t);if(l.done)return l.value;var m=n(e),d=String(this),f=c(m,RegExp),v=m.unicode,h=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(p?"g":"y"),g=new f(p?"^(?:"+m.source+")":m,h),F=void 0===r?b:r>>>0;if(0===F)return[];if(0===d.length)return null===u(g,d)?[d]:[];var j=0,k=0,y=[];while(k<d.length){g.lastIndex=p?0:k;var D,x=u(g,p?d.slice(k):d);if(null===x||(D=_(s(g.lastIndex+(p?k:0)),d.length))===j)k=i(d,k,v);else{if(y.push(d.slice(j,k)),y.length===F)return y;for(var I=1;I<=x.length-1;I++)if(y.push(x[I]),y.length===F)return y;k=j=D}}return y.push(d.slice(j)),y}]}),p)},"656e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"customer_name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.customer_name,callback:function(t){e.$set(e.ruleForm,"customer_name",t)},expression:"ruleForm.customer_name"}},[a("template",{slot:"prepend"},[e._v("得意先名")])],2)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"project_code"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.project_code,callback:function(t){e.$set(e.ruleForm,"project_code",t)},expression:"ruleForm.project_code"}},[a("template",{slot:"prepend"},[e._v("案件CD")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"estimate_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"見積CD"},on:{change:e.reLoadEstimateDetailsData},model:{value:e.ruleForm.estimate_code,callback:function(t){e.$set(e.ruleForm,"estimate_code",t)},expression:"ruleForm.estimate_code"}},e._l(e.EstimateDataAll,(function(e){return a("el-option",{key:e.estimate_code,attrs:{label:e.estimate_name,value:e.estimate_code}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"delivery_code"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.delivery_code,callback:function(t){e.$set(e.ruleForm,"delivery_code",t)},expression:"ruleForm.delivery_code"}},[a("template",{slot:"prepend"},[e._v("納品CD")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"project_name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.project_name,callback:function(t){e.$set(e.ruleForm,"project_name",t)},expression:"ruleForm.project_name"}},[a("template",{slot:"prepend"},[e._v("案件名")])],2)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"invoice_code"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.invoice_code,callback:function(t){e.$set(e.ruleForm,"invoice_code",t)},expression:"ruleForm.invoice_code"}},[a("template",{slot:"prepend"},[e._v("請求CD")])],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"total"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}},[a("template",{slot:"prepend"},[e._v("税込合計金額")])],2)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"tax"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.tax,callback:function(t){e.tax=t},expression:"tax"}},[a("template",{slot:"prepend"},[e._v("消費税")])],2)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"sub_total"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.sub_total,callback:function(t){e.sub_total=t},expression:"sub_total"}},[a("template",{slot:"prepend"},[e._v("合計金額")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("EstimateDetailsTable",{attrs:{"c-estimate-details-table-data":e.tableInvoiceData,"c-estimate-code":e.ruleForm.estimate_code,"c-products-data-all":e.ProductsDataAll,"c-invoice-form":!0},on:{estimatedetdatareload:e.reLoadEstimateDetailsData}},[a("template",{slot:"empty"},[e._v("ランニングデータがありません")])],2)],1)],1),a("br"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"",prop:"note"}},[a("el-input",{model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}},[a("template",{slot:"prepend"},[e._v("※(注)")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20,justify:"start"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"bank_name"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.bank_name,callback:function(t){e.$set(e.ruleForm,"bank_name",t)},expression:"ruleForm.bank_name"}},[a("template",{slot:"prepend"},[e._v("銀行")])],2)],1),a("el-form-item",{attrs:{prop:"bank_number"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.bank_number,callback:function(t){e.$set(e.ruleForm,"bank_number",t)},expression:"ruleForm.bank_number"}},[a("template",{slot:"prepend"},[e._v("口座")])],2)],1),a("el-form-item",{attrs:{prop:"bank_user"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.bank_user,callback:function(t){e.$set(e.ruleForm,"bank_user",t)},expression:"ruleForm.bank_user"}},[a("template",{slot:"prepend"},[e._v("口座名")])],2)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-button-group",[a("el-button",{attrs:{type:"warning",icon:"el-icon-document-delete",plain:""},on:{click:function(t){return e.cancelForm()}}},[e._v("閉じる")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-checked",plain:""},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登録・更新")])],1)],1)],1)],1)],1)},r=[],n=a("b85c"),l=(a("ac1f"),a("1276"),a("5319"),a("d3b7"),a("25f0"),a("a15b"),a("159b"),a("99af"),a("d81d"),a("a9e3"),a("4de4"),a("db02")),c=a("4c79"),i=a("67b1"),s=a("06c7"),u=a("5c96"),m={name:"InvoiceForm",components:{EstimateDetailsTable:l["default"]},props:{cInvoiceForm:{type:Object,default:function(){return{project_name:"",project_code:"",customer_name:"",estimate_code:"",delivery_code:"",invoice_code:"",method:""}}}},data:function(){return{tableInvoiceData:[],ProductsDataAll:[],EstimateDataAll:[],ruleForm:{invoice_code:this.cInvoiceForm.invoice_code,project_name:this.cInvoiceForm.project_name,project_code:this.cInvoiceForm.project_code,delivery_code:this.cInvoiceForm.delivery_code,estimate_code:[],customer_name:this.cInvoiceForm.customer_name,total:"",tax:"",sub_total:"",bank_name:"PayPay銀行 本店営業部",bank_number:"普通 8451691",bank_user:"株式会社ブリッジ",note:""},rules:{customer_name:[{required:!0,message:"得意先名を入力してください",trigger:"change"}]}}},created:function(){this.ruleForm.estimate_code=this.cInvoiceForm.estimate_code.split(","),"put"===this.cInvoiceForm.method&&this.getInvoiceDataOne(),this.reLoadEstimateDetailsData(),this.getProductDataAll(),this.getEstimateDataAll()},computed:{sub_total:function(){var e,t=0,a=Object(n["a"])(this.tableInvoiceData);try{for(a.s();!(e=a.n()).done;){var o=e.value;t+=parseFloat(o.sub_total)}}catch(r){a.e(r)}finally{a.f()}return t.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")},tax:function(){var e,t=0,a=Object(n["a"])(this.tableInvoiceData);try{for(a.s();!(e=a.n()).done;){var o=e.value;t+=parseFloat(o.sub_total)}}catch(r){a.e(r)}finally{a.f()}return t=.1*parseFloat(t),t.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")},total:function(){var e,t=0,a=Object(n["a"])(this.tableInvoiceData);try{for(a.s();!(e=a.n()).done;){var o=e.value;t+=parseFloat(o.sub_total)}}catch(r){a.e(r)}finally{a.f()}return t+=.1*t,t.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,")}},methods:{postInvoiceData:function(){var e=this,t={};t["estimate_code"]=this.ruleForm.estimate_code.toString(),t["project_code"]=this.ruleForm.project_code,t["project_name"]=this.ruleForm.project_name,t["customer_name"]=this.ruleForm.customer_name,t["delivery_code"]=this.ruleForm.delivery_code,t["invoice_code"]=this.ruleForm.invoice_code,t["sub_total"]=this.sub_total,t["tax"]=this.tax,t["total"]=this.total,t["note"]=this.ruleForm.note,t["bank_name"]=this.ruleForm.bank_name,t["bank_number"]=this.ruleForm.bank_number,t["bank_user"]=this.ruleForm.bank_user,t["created_by"]=this.$store.getters.full_name,Object(s["d"])(t).then((function(t){1===t.data.status?(e.$emit("submit"),Object(u["Message"])({showClose:!0,message:t.data.message,type:"success"})):(e.$emit("cancel"),Object(u["Message"])({showClose:!0,message:t.data.message,type:"error"}))})).catch((function(e){console.log(e)}))},putInvoiceData:function(){var e=this,t={};t["estimate_code"]=this.ruleForm.estimate_code.join(","),t["project_code"]=this.ruleForm.project_code,t["project_name"]=this.ruleForm.project_name,t["customer_name"]=this.ruleForm.customer_name,t["delivery_code"]=this.ruleForm.delivery_code,t["invoice_code"]=this.ruleForm.invoice_code,t["sub_total"]=this.sub_total,t["tax"]=this.tax,t["total"]=this.total,t["note"]=this.ruleForm.note,t["bank_name"]=this.ruleForm.bank_name,t["bank_number"]=this.ruleForm.bank_number,t["bank_user"]=this.ruleForm.bank_user,t["modified_by"]=this.$store.getters.full_name,Object(s["e"])(t).then((function(t){1===t.data.status?(e.$emit("submit"),Object(u["Message"])({showClose:!0,message:t.data.message,type:"success"})):(e.$emit("cancel"),Object(u["Message"])({showClose:!0,message:t.data.message,type:"error"}))})).catch((function(e){console.log(e)}))},getInvoiceDataOne:function(){var e=this,t={};t["invoice_code"]=this.cInvoiceForm.invoice_code,Object(s["b"])(t).then((function(t){e.ruleForm.project_name=t.data.data[0].project_name,e.ruleForm.project_code=t.data.data[0].project_code,e.ruleForm.customer_name=t.data.data[0].customer_name,e.ruleForm.delivery_code=t.data.data[0].delivery_code,e.ruleForm.invoice_code=t.data.data[0].invoice_code,e.ruleForm.note=t.data.data[0].note})).catch((function(e){console.log(e)}))},getEstimateDetailsDataAll:function(){var e=this,t={};t["estimate_code"]=this.cInvoiceForm.estimate_code,Object(i["e"])(t).then((function(t){var a=t.data.data;a&&a.forEach((function(e){e["isEdit"]=!1,e["isAdd"]=!1})),e.tableInvoiceData=a})).catch((function(e){console.log(e)}))},getEstimateDataAll:function(){var e=this,t={};t["project_code"]=this.$route.query.project_code,Object(i["b"])(t).then((function(t){e.EstimateDataAll=t.data.data})).catch((function(e){console.log(e)}))},getProductDataAll:function(){var e=this;Object(c["b"])().then((function(t){e.ProductsDataAll=t.data.data})).catch((function(e){console.log(e)}))},reLoadEstimateDetailsData:function(){var e=this;this.tableInvoiceData=[];var t,a=Object(n["a"])(this.ruleForm.estimate_code);try{for(a.s();!(t=a.n()).done;){var o=t.value,r={};r["estimate_code"]=o,Object(i["e"])(r).then((function(t){var a=t.data.data;a&&(a.forEach((function(e){e["isEdit"]=!1,e["isAdd"]=!1})),e.tableInvoiceData=e.tableInvoiceData.concat(a))})).catch((function(e){console.log(e)}))}}catch(l){a.e(l)}finally{a.f()}},getSummaries:function(e){var t=e.columns,a=e.data,o=[];return t.forEach((function(e,t){if(0!==t){var r=a.map((function(t){return Number(t[e.property])}));r.every((function(e){return isNaN(e)}))?o[t]="":(o[t]=r.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0),2===t?o[t]="":(o[t]=o[t].toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,"),o[t]+="円"))}else o[t]="総計"})),o},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;switch(t.cInvoiceForm.method){case"post":t.postInvoiceData();break;case"put":t.putInvoiceData();break;default:break}}))},cancelForm:function(){this.$emit("cancel")},querySearch:function(e,t){var a=this.EstimateDataAll,o=e?a.filter(this.createFilter(e)):a;t(o)},createFilter:function(e){return function(t){return t.estimate_code.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e)},handleIconClick:function(e){console.log(e)}}},d=m,p=a("2877"),f=Object(p["a"])(d,o,r,!1,null,"66ed3202",null);t["default"]=f.exports},"99af":function(e,t,a){"use strict";var o=a("23e7"),r=a("d039"),n=a("e8b5"),l=a("861d"),c=a("7b0b"),i=a("50c4"),s=a("8418"),u=a("65f0"),m=a("1dde"),d=a("b622"),p=a("2d00"),f=d("isConcatSpreadable"),_=9007199254740991,b="Maximum allowed index exceeded",v=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=m("concat"),g=function(e){if(!l(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},F=!v||!h;o({target:"Array",proto:!0,forced:F},{concat:function(e){var t,a,o,r,n,l=c(this),m=u(l,0),d=0;for(t=-1,o=arguments.length;t<o;t++)if(n=-1===t?l:arguments[t],g(n)){if(r=i(n.length),d+r>_)throw TypeError(b);for(a=0;a<r;a++,d++)a in n&&s(m,d,n[a])}else{if(d>=_)throw TypeError(b);s(m,d++,n)}return m.length=d,m}})},a15b:function(e,t,a){"use strict";var o=a("23e7"),r=a("44ad"),n=a("fc6a"),l=a("a640"),c=[].join,i=r!=Object,s=l("join",",");o({target:"Array",proto:!0,forced:i||!s},{join:function(e){return c.call(n(this),void 0===e?",":e)}})}}]);
//# sourceMappingURL=chunk-8484165c.9877fb3d.js.map