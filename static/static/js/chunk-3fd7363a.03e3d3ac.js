(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fd7363a","chunk-81c0bf04"],{"05e2":function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s}));var o=r("1bab");function a(e){return Object(o["a"])({url:"/PostDeliveryData",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/GetDeliveryDataAll",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/GetDeliveryDataOne",method:"post",data:e})}},6209:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-page-header",{attrs:{content:"详情页面"},on:{back:e.goBack}},[r("template",{slot:"title"},[e._t("title")],2),r("template",{slot:"content"},[e._t("content")],2)],2)},a=[],l={name:"PageHeader",methods:{goBack:function(){if(window.history.length<=1)return this.$router.push({path:"/ProjectList"}),!1;this.$router.go(-1)}}},s=l,n=(r("b0cc"),r("2877")),i=Object(n["a"])(s,o,a,!1,null,"9965c33a",null);t["a"]=i.exports},6570:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"ProjectName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.ProjectName,callback:function(t){e.$set(e.ruleForm,"ProjectName",t)},expression:"ruleForm.ProjectName"}},[r("template",{slot:"prepend"},[e._v("案件名")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"ProjectCode"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.ProjectCode,callback:function(t){e.$set(e.ruleForm,"ProjectCode",t)},expression:"ruleForm.ProjectCode"}},[r("template",{slot:"prepend"},[e._v("案件CD")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"EstimateCode"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.EstimateCode,callback:function(t){e.$set(e.ruleForm,"EstimateCode",t)},expression:"ruleForm.EstimateCode"}},[r("template",{slot:"prepend"},[e._v("見積CD")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"OrderCode"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.OrderCode,callback:function(t){e.$set(e.ruleForm,"OrderCode",t)},expression:"ruleForm.OrderCode"}},[r("template",{slot:"prepend"},[e._v("注文CD")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"CustomerName"}},[r("el-input",{model:{value:e.ruleForm.CustomerName,callback:function(t){e.$set(e.ruleForm,"CustomerName",t)},expression:"ruleForm.CustomerName"}},[r("template",{slot:"prepend"},[e._v("得意先名")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"CustomerAddress"}},[r("el-input",{model:{value:e.ruleForm.CustomerAddress,callback:function(t){e.$set(e.ruleForm,"CustomerAddress",t)},expression:"ruleForm.CustomerAddress"}},[r("template",{slot:"prepend"},[e._v("得意先住所")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"Work"}},[r("el-input",{model:{value:e.ruleForm.Work,callback:function(t){e.$set(e.ruleForm,"Work",t)},expression:"ruleForm.Work"}},[r("template",{slot:"prepend"},[e._v("作業内容")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"PersonnelI"}},[r("el-input",{model:{value:e.ruleForm.PersonnelI,callback:function(t){e.$set(e.ruleForm,"PersonnelI",t)},expression:"ruleForm.PersonnelI"}},[r("template",{slot:"prepend"},[e._v("主任担当者(甲)")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"WorkTime"}},[r("el-input",{model:{value:e.ruleForm.WorkTime,callback:function(t){e.$set(e.ruleForm,"WorkTime",t)},expression:"ruleForm.WorkTime"}},[r("template",{slot:"prepend"},[e._v("作業期間")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"PersonnelII"}},[r("el-input",{model:{value:e.ruleForm.PersonnelII,callback:function(t){e.$set(e.ruleForm,"PersonnelII",t)},expression:"ruleForm.PersonnelII"}},[r("template",{slot:"prepend"},[e._v("主任担当者(乙)")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"Deliverables"}},[r("el-input",{model:{value:e.ruleForm.Deliverables,callback:function(t){e.$set(e.ruleForm,"Deliverables",t)},expression:"ruleForm.Deliverables"}},[r("template",{slot:"prepend"},[e._v("納入物")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"Commission"}},[r("el-input",{model:{value:e.ruleForm.Commission,callback:function(t){e.$set(e.ruleForm,"Commission",t)},expression:"ruleForm.Commission"}},[r("template",{slot:"prepend"},[e._v("委託料")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"DeliverableSpace"}},[r("el-input",{model:{value:e.ruleForm.DeliverableSpace,callback:function(t){e.$set(e.ruleForm,"DeliverableSpace",t)},expression:"ruleForm.DeliverableSpace"}},[r("template",{slot:"prepend"},[e._v("納入場所")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"PaymentDate"}},[r("el-input",{model:{value:e.ruleForm.PaymentDate,callback:function(t){e.$set(e.ruleForm,"PaymentDate",t)},expression:"ruleForm.PaymentDate"}},[r("template",{slot:"prepend"},[e._v("支払期日")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"Other"}},[r("el-input",{model:{value:e.ruleForm.Other,callback:function(t){e.$set(e.ruleForm,"Other",t)},expression:"ruleForm.Other"}},[r("template",{slot:"prepend"},[e._v("その他")])],2)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"AcceptanceConditions"}},[r("el-input",{model:{value:e.ruleForm.AcceptanceConditions,callback:function(t){e.$set(e.ruleForm,"AcceptanceConditions",t)},expression:"ruleForm.AcceptanceConditions"}},[r("template",{slot:"prepend"},[e._v("検収条件")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"",prop:"Note"}},[r("el-input",{model:{value:e.ruleForm.Note,callback:function(t){e.$set(e.ruleForm,"Note",t)},expression:"ruleForm.Note"}},[r("template",{slot:"prepend"},[e._v("※(注)")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",[r("el-button-group",[r("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.cancelForm()}}},[e._v("キャンセル")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登録")])],1)],1)],1)],1)],1)},a=[],l=r("f8b7"),s=r("9671"),n={name:"OrderForm",components:{},props:{cOrderForm:{type:Object,default:function(){return{ProjectName:"",ProjectCode:"",CustomerName:"",EstimateCode:"",OrderCode:"",uuid:""}}}},data:function(){return{ruleForm:{OrderCode:this.cOrderForm.OrderCode,ProjectName:this.cOrderForm.ProjectName,ProjectCode:this.cOrderForm.ProjectCode,EstimateCode:this.cOrderForm.EstimateCode,CustomerName:this.cOrderForm.CustomerName,CustomerAddress:"",Work:"",WorkTime:"",PersonnelI:"",PersonnelII:"",Deliverables:"",DeliverableSpace:"",Commission:"",PaymentDate:"",AcceptanceConditions:"",Other:"",Note:""},rules:{CustomerName:[{required:!0,message:"得意先名を入力してください",trigger:"change"}],CustomerAddress:[{required:!0,message:"得意先住所を入力してください",trigger:"blur"}],Work:[{required:!0,message:"作業内容を入力してください",trigger:"blur"}],WorkTime:[{required:!0,message:"作業期間を入力してください",trigger:"blur"}],PersonnelI:[{required:!0,message:"主任担当者(甲)を入力してください",trigger:"blur"}],PersonnelII:[{required:!0,message:"主任担当者(乙)を入力してください",trigger:"blur"}],Deliverables:[{required:!0,message:"成果物を入力してください",trigger:"blur"}],DeliverableSpace:[{required:!0,message:"納入場所を入力してください",trigger:"blur"}],Commission:[{required:!0,message:"委託料を入力してください",trigger:"blur"}],PaymentDate:[{required:!0,message:"支払期日を入力してください",trigger:"blur"}],AcceptanceConditions:[{required:!0,message:"検収条件を入力してください",trigger:"blur"}]}}},computed:{newDateTime:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),a=e.getHours(),l=e.getMinutes();r>=1&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o);var s=t+"-"+r+"-"+o+" "+a+":"+l;return s}},created:function(){this.getOrderDataOne(),this.getCustomerDataOne()},methods:{postOrderData:function(){var e=this,t={};t["OrderCode"]=this.ruleForm.OrderCode,t["ProjectName"]=this.ruleForm.ProjectName,t["ProjectCode"]=this.ruleForm.ProjectCode,t["EstimateCode"]=this.ruleForm.EstimateCode,t["CustomerName"]=this.ruleForm.CustomerName,t["CustomerAddress"]=this.ruleForm.CustomerAddress,t["Work"]=this.ruleForm.Work,t["WorkTime"]=this.ruleForm.WorkTime,t["PersonnelI"]=this.ruleForm.PersonnelI,t["PersonnelII"]=this.ruleForm.PersonnelII,t["Deliverables"]=this.ruleForm.Deliverables,t["DeliverableSpace"]=this.ruleForm.DeliverableSpace,t["Commission"]=this.ruleForm.Commission,t["PaymentDate"]=this.ruleForm.PaymentDate,t["AcceptanceConditions"]=this.ruleForm.AcceptanceConditions,t["Other"]=this.ruleForm.Other,t["Note"]=this.ruleForm.Note,t["DateTime"]=this.newDateTime,Object(l["c"])(t).then((function(t){200==t.status?(e.$emit("submit"),e.$message({showClose:!0,message:"注文書データ登録・更新成功しました。",type:"success"})):(e.$emit("cancel"),e.$message({showClose:!0,message:"注文書データ登録・更新失敗しました。",type:"error"}))})).catch((function(e){console.log(e)}))},getOrderDataOne:function(){var e=this,t={};t["OrderCode"]=this.cOrderForm.OrderCode,Object(l["b"])(t).then((function(t){e.ruleForm.OrderCode=t.data.data[0].OrderCode,e.ruleForm.ProjectName=t.data.data[0].ProjectName,e.ruleForm.ProjectCode=t.data.data[0].ProjectCode,e.ruleForm.EstimateCode=t.data.data[0].EstimateCode,e.ruleForm.CustomerName=t.data.data[0].CustomerName,e.ruleForm.CustomerAddress=t.data.data[0].CustomerAddress,e.ruleForm.Work=t.data.data[0].Work,e.ruleForm.WorkTime=t.data.data[0].WorkTime,e.ruleForm.PersonnelI=t.data.data[0].PersonnelI,e.ruleForm.PersonnelII=t.data.data[0].PersonnelII,e.ruleForm.Deliverables=t.data.data[0].Deliverables,e.ruleForm.DeliverableSpace=t.data.data[0].DeliverableSpace,e.ruleForm.Commission=t.data.data[0].Commission,e.ruleForm.PaymentDate=t.data.data[0].PaymentDate,e.ruleForm.AcceptanceConditions=t.data.data[0].AcceptanceConditions,e.ruleForm.Other=t.data.data[0].Other,e.ruleForm.Note=t.data.data[0].Note})).catch((function(e){console.log(e)}))},getCustomerDataOne:function(){var e=this,t={};t["CustomerCode"]=this.cOrderForm.CustomerCode,Object(s["b"])(t).then((function(t){e.ruleForm.CustomerAddress=t.data.data[0].Address1+" "+t.data.data[0].Address2+" "+t.data.data[0].Address3})).catch((function(e){console.log(e)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!"),t.postOrderData()}))},cancelForm:function(){this.$emit("cancel")}}},i=n,u=r("2877"),c=Object(u["a"])(i,o,a,!1,null,"5747e5a2",null);t["default"]=c.exports},7273:function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return n})),r.d(t,"c",(function(){return i}));var o=r("1bab");function a(e){return Object(o["a"])({url:"/project",method:"post",data:e})}function l(){return Object(o["a"])({url:"/GetProjectDataAll",method:"get"})}function s(e){return Object(o["a"])({url:"/GetProjectDataOne",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/SearchProjectData",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/GetTimeLineData",method:"post",data:e})}},"908d":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PageHeader",[r("template",{slot:"title"},[e._v("戻る")]),r("template",{slot:"content"},[e._v("案件詳細")])],2),[e._v("案件情報の登録及び編集する画面です。")],[e._v("この画面で当案件の見積・注文・納品・検収・請求情報を確認できます。")],r("el-divider"),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"ProjectName"}},[r("el-input",{attrs:{placeholder:"案件名"},model:{value:e.ruleForm.ProjectName,callback:function(t){e.$set(e.ruleForm,"ProjectName",t)},expression:"ruleForm.ProjectName"}},[r("template",{slot:"prepend"},[e._v("案件名")])],2)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"案件コード",disabled:!0},model:{value:e.ruleForm.ProjectCode,callback:function(t){e.$set(e.ruleForm,"ProjectCode",t)},expression:"ruleForm.ProjectCode"}},[r("template",{slot:"prepend"},[e._v("案件CD")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"CustomerName"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearch,placeholder:"得意先"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[r("div",{staticClass:"name"},[e._v(e._s(o.value=o.CustomerName)+" ("+e._s(o.key=o.Personnel)+")")])]}}]),model:{value:e.ruleForm.CustomerName,callback:function(t){e.$set(e.ruleForm,"CustomerName",t)},expression:"ruleForm.CustomerName"}},[r("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClick},slot:"suffix"}),r("template",{slot:"prepend"},[e._v("得意先")])],2)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"Personnel"}},[r("el-input",{attrs:{placeholder:"担当者"},model:{value:e.ruleForm.Personnel,callback:function(t){e.$set(e.ruleForm,"Personnel",t)},expression:"ruleForm.Personnel"}},[r("template",{slot:"prepend"},[e._v("担当者")])],2)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{prop:"Synopsis"}},[r("el-input",{attrs:{placeholder:"案件詳細"},model:{value:e.ruleForm.Synopsis,callback:function(t){e.$set(e.ruleForm,"Synopsis",t)},expression:"ruleForm.Synopsis"}},[r("template",{slot:"prepend"},[e._v("案件詳細")])],2)],1)],1)],1),r("el-row",{attrs:{type:"flex",gutter:20,justify:"start"}},[r("el-col",{attrs:{span:13}},[r("el-form-item",[r("el-button-group",[r("el-button",{attrs:{type:"primary",icon:"el-icon-finished"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登録")]),r("el-button",{attrs:{type:"success",icon:"el-icon-edit-outline"},on:{click:function(t){return e.toEstimateFormDialog("ruleForm")}}},[e._v("見積作成 ")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-document-delete"},on:{click:function(t){return e.deleteForm("ruleForm")}}},[e._v("案件廃棄")])],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("ProjectTabTable",{attrs:{"c-table-data-estimate":e.tableDataEstimate,"c-table-data-order":e.tableDataOrder,"c-table-data-delivery":e.tableDataDelivery,"c-table-data-acceptance":e.tableDataAcceptance,"c-table-data-invoice":e.tableDataInvoice},on:{evEstimateForm:function(t){return e.toEstimateFormDialog(arguments)},evOrderForm:function(t){return e.toOrderFormDialog(arguments)}}})],1)],1)],1),r("div",[e.dialogEstimateFormVisible?r("el-dialog",{attrs:{title:"見積書データの登録・更新",visible:e.dialogEstimateFormVisible,top:"5%","destroy-on-close":""},on:{"update:visible":function(t){e.dialogEstimateFormVisible=t}}},[r("EstimateForm",{attrs:{"c-estimate-form":e.toEstimateForm},on:{cancel:e.closeDialog,submit:e.reloadList}})],1):e._e(),e.dialogOrderFormVisible?r("el-dialog",{attrs:{title:"注文書データの登録・更新",visible:e.dialogOrderFormVisible,top:"5%","destroy-on-close":""},on:{"update:visible":function(t){e.dialogOrderFormVisible=t}}},[r("OrderForm",{attrs:{"c-order-form":e.toOrderForm},on:{cancel:e.closeDialog,submit:e.reloadList}})],1):e._e()],1)],2)},a=[],l=(r("fb6a"),r("4de4"),r("9671")),s=r("67b1"),n=r("7273"),i=r("f8b7"),u=r("05e2"),c=r("6209"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"見積書",name:"first"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cTableDataEstimate}},[r("template",{slot:"empty"},[r("p",[e._v("見積データがありません")])]),r("el-table-column",{attrs:{label:"見積CD",width:"210%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{staticStyle:{color:"#ffd04b",cursor:"pointer","font-weight":"500"},on:{click:function(r){return e.handleEditEstimate(t.$index,t.row)}}},[e._v(e._s(t.row.EstimateCode))])]}}])}),r("el-table-column",{attrs:{label:"成果物①",width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables1))])]}}])}),r("el-table-column",{attrs:{label:"成果物②",width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables2))])]}}])}),r("el-table-column",{attrs:{label:"成果物③",width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables3))])]}}])}),r("el-table-column",{attrs:{label:"作業場所",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.WorkSpace))])]}}])}),r("el-table-column",{attrs:{label:"税込金額",width:"150%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("税抜金額: "+e._s(t.row.SubTotal))]),r("p",[e._v("税金: "+e._s(t.row.Tax))]),r("p",[e._v("税込金額: "+e._s(t.row.Total))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.Total))])],1)])]}}])}),r("el-table-column",{attrs:{label:"補足",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Supplement))])]}}])}),r("el-table-column",{attrs:{label:"備考",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Remarks))])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.toOrderForm(t.$index,t.row)}}},[e._v("注文 ")])]}}])})],2)],1),r("el-tab-pane",{attrs:{label:"注文書",name:"second"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cTableDataOrder}},[r("template",{slot:"empty"},[r("p",[e._v("受注データがありません")])]),r("el-table-column",{attrs:{label:"注文CD",width:"210%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{staticStyle:{color:"#ffd04b",cursor:"pointer","font-weight":"500"},on:{click:function(r){return e.handleEditOrder(t.$index,t.row)}}},[e._v(e._s(t.row.OrderCode))])]}}])}),r("el-table-column",{attrs:{label:"作業内容",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Work))])]}}])}),r("el-table-column",{attrs:{label:"納入物",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables))])]}}])}),r("el-table-column",{attrs:{label:"納入場所",width:"150%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.DeliverableSpace))])]}}])}),r("el-table-column",{attrs:{label:"委託料",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Commission))])]}}])}),r("el-table-column",{attrs:{label:"その他",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Other))])]}}])}),r("el-table-column",{attrs:{label:"操作"}})],2)],1),r("el-tab-pane",{attrs:{label:"納品書",name:"third"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cTableDataDelivery}},[r("template",{slot:"empty"},[r("p",[e._v("受注データがありません")])]),r("el-table-column",{attrs:{label:"納品CD",width:"210%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-files"}),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.DeliveryCode))])]}}])}),r("el-table-column",{attrs:{label:"納入物1",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables1))])]}}])}),r("el-table-column",{attrs:{label:"納入物2",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables2))])]}}])}),r("el-table-column",{attrs:{label:"納入物3",width:"150%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Deliverables3))])]}}])}),r("el-table-column",{attrs:{label:"※注",width:"200%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Remarks))])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEditDelivery(t.$index,t.row)}}},[e._v("编辑 ")])]}}])})],2)],1),r("el-tab-pane",{attrs:{label:"検収書",name:"fourth"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cTableDataAcceptance}},[r("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),r("el-table-column",{attrs:{label:"姓名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("姓名: "+e._s(t.row.name))]),r("p",[e._v("住址: "+e._s(t.row.address))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1)],1),r("el-tab-pane",{attrs:{label:"請求書",name:"five"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cTableDataInvoice}},[r("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),r("el-table-column",{attrs:{label:"姓名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("姓名: "+e._s(t.row.name))]),r("p",[e._v("住址: "+e._s(t.row.address))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1)],1)],1)},d=[],p={name:"ProjectTabTable",props:{cTableDataEstimate:{type:Array,default:function(){return[]}},cTableDataOrder:{type:Array,default:function(){return[]}},cTableDataDelivery:{type:Array,default:function(){return[]}},cTableDataAcceptance:{type:Array,default:function(){return[]}},cTableDataInvoice:{type:Array,default:function(){return[]}}},data:function(){return{activeName:""}},created:function(){var e=this.$route.query.activeName;this.activeName=e||"first"},methods:{handleEditEstimate:function(e,t){this.$emit("evEstimateForm",{uuidEstimate:t.uuid,EstimateCode:t.EstimateCode})},toOrderForm:function(e,t){this.$emit("evOrderForm",{EstimateCode:t.EstimateCode})},handleEditOrder:function(e,t){this.$emit("evOrderForm",{uuidOrder:t.uuid,EstimateCode:t.EstimateCode,OrderCode:t.OrderCode})},handleEditDelivery:function(e,t){this.$router.push({path:"Deliveryform",query:{DeliveryCode:t.DeliveryCode,EstimateCode:t.EstimateCode}})},handleClick:function(e,t){console.log(e,t)}}},f=p,b=r("2877"),h=Object(b["a"])(f,m,d,!1,null,"56df76cc",null),C=h.exports,v=r("23de"),F=r("6570"),g={name:"ProjectForm",components:{PageHeader:c["a"],ProjectTabTable:C,EstimateForm:v["default"],OrderForm:F["default"]},data:function(){return{dialogEstimateFormVisible:!1,dialogOrderFormVisible:!1,restaurants:[],Customers:[],ruleForm:{ProjectCode:"",ProjectName:"",CustomerName:"",CustomerCode:"",Personnel:"",Synopsis:""},tableDataEstimate:[{}],tableDataOrder:[{}],tableDataDelivery:[{}],tableDataAcceptance:[{}],tableDataInvoice:[{}],toEstimateForm:{},toOrderForm:{},rules:{ProjectName:[{required:!0,message:"案件名を入力してください",trigger:"blur"}],CustomerName:[{required:!0,message:"得意先を選びまたは入力してください",trigger:"change"}],Synopsis:[{required:!0,message:"案件詳細を入力してください",trigger:"blur"}]}}},created:function(){this.getCustomerDataAll(),this.getEstimateDataAll(),this.getDeliveryDataAll(),this.$route.query.ProjectCode?(this.getProjectDataOne(),this.getOrderDataAll()):this.ruleForm.ProjectCode=this.newProjectcode("Prj")},computed:{newDateTime:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),a=e.getHours(),l=e.getMinutes();r>=1&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o);var s=t+"-"+r+"-"+o+" "+a+":"+l;return s}},methods:{newProjectcode:function(e){var t=new Date,r=t.getFullYear(),o=t.getMonth()+1,a=t.getDate(),l=t.getHours(),s=t.getMinutes(),n=t.getSeconds();o>=1&&o<=9&&(o="0"+o),a>=1&&a<=9&&(a="0"+a),l>=0&&l<=9&&(l="0"+l),s>=0&&s<=9&&(s="0"+s),n>=0&&n<=9&&(n="0"+n);var i=r+o+a+l+s+n,u=e+i.slice(2);return u},getCustomerDataAll:function(){var e=this;Object(l["a"])().then((function(t){e.Customers=t.data.data})).catch((function(e){console.log(e)}))},getProjectDataOne:function(){var e=this,t={};t["ProjectCode"]=this.$route.query.ProjectCode,Object(n["b"])(t).then((function(t){e.ruleForm.ProjectCode=t.data.data[0].ProjectCode,e.ruleForm.ProjectName=t.data.data[0].ProjectName,e.ruleForm.CustomerName=t.data.data[0].CustomerName,e.ruleForm.Personnel=t.data.data[0].Personnel,e.ruleForm.Synopsis=t.data.data[0].Synopsis,e.ruleForm.CustomerCode=t.data.data[0].CustomerCode})).catch((function(e){console.log(e)}))},getEstimateDataAll:function(){var e=this,t={};t["ProjectCode"]=this.$route.query.ProjectCode,Object(s["a"])(t).then((function(t){e.tableDataEstimate=t.data.data})).catch((function(e){console.log(e)}))},getOrderDataAll:function(){var e=this,t={};t["ProjectCode"]=this.$route.query.ProjectCode,Object(i["a"])(t).then((function(t){e.tableDataOrder=t.data.data})).catch((function(e){console.log(e)}))},getDeliveryDataAll:function(){var e=this,t={};t["ProjectCode"]=this.$route.query.ProjectCode,Object(u["a"])(t).then((function(t){e.tableDataDelivery=t.data.data})).catch((function(e){console.log(e)}))},postProjectData:function(e){var t=this,r={};r["ProjectCode"]=this.ruleForm.ProjectCode,r["ProjectName"]=this.ruleForm.ProjectName,r["CustomerName"]=this.ruleForm.CustomerName,r["CustomerCode"]=this.ruleForm.CustomerCode,r["Personnel"]=this.ruleForm.Personnel,r["Synopsis"]=this.ruleForm.Synopsis,r["DateTime"]=this.newDateTime,r["Is_Delete"]=e,Object(n["d"])(r).then((function(e){t.tableData=e.data.data,"200"===e.data.code&&t.$router.push({path:"ProjectList"})})).catch((function(e){console.log(e)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!"),t.postProjectData(0)}))},deleteForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!"),t.postProjectData(1)})),this.$router.push({path:"ProjectList"})},toEstimateFormDialog:function(e){this.dialogEstimateFormVisible=!0,e[0].uuidEstimate?this.toEstimateForm={ProjectCode:this.ruleForm.ProjectCode,ProjectName:this.ruleForm.ProjectName,CustomerName:this.ruleForm.CustomerName,CustomerCode:this.ruleForm.CustomerCode,EstimateCode:e[0].EstimateCode,uuid:e[0].uuidEstimate}:this.toEstimateForm={ProjectCode:this.ruleForm.ProjectCode,ProjectName:this.ruleForm.ProjectName,CustomerName:this.ruleForm.CustomerName,CustomerCode:this.ruleForm.CustomerCode,EstimateCode:this.newProjectcode("Esh"),uuid:""},this.toEstimateForm},toOrderFormDialog:function(e){this.dialogOrderFormVisible=!0,console.log(e[0]),e[0].uuidOrder?this.toOrderForm={ProjectCode:this.ruleForm.ProjectCode,ProjectName:this.ruleForm.ProjectName,CustomerName:this.ruleForm.CustomerName,CustomerCode:this.ruleForm.CustomerCode,EstimateCode:e[0].EstimateCode,OrderCode:e[0].OrderCode,uuid:e[0].uuidOrder}:this.toOrderForm={ProjectCode:this.ruleForm.ProjectCode,ProjectName:this.ruleForm.ProjectName,CustomerName:this.ruleForm.CustomerName,CustomerCode:this.ruleForm.CustomerCode,EstimateCode:e[0].EstimateCode,OrderCode:this.newProjectcode("Ord"),uuid:""},console.log(e)},closeDialog:function(){this.dialogEstimateFormVisible=!1,this.dialogOrderFormVisible=!1},reloadList:function(){this.dialogEstimateFormVisible=!1,this.dialogOrderFormVisible=!1,this.getEstimateDataAll(),this.getOrderDataAll()},evEstimateForm:function(e){this.dialogEstimateFormVisible=!0,console.log(e[0].uuidEstimate)},evOrderForm:function(e){this.dialogOrderFormVisible=!0,console.log(e[0].uuidEstimate)},querySearch:function(e,t){var r=this.Customers,o=e?r.filter(this.createFilter(e)):r;t(o)},createFilter:function(e){return function(t){return 0===t.CustomerName.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.ruleForm.CustomerCode=e.CustomerCode,this.ruleForm.Personnel=e.Personnel},handleIconClick:function(e){console.log(e)}}},_=g,D=Object(b["a"])(_,o,a,!1,null,"14e835f6",null);t["default"]=D.exports},9671:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return n}));var o=r("1bab");function a(e){return Object(o["a"])({url:"/PostCustomerData",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/GetCustomerDataAll",method:"get",data:e})}function s(e){return Object(o["a"])({url:"/GetCustomerDataOne",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/SearchCustomerData",method:"post",data:e})}},b0cc:function(e,t,r){"use strict";r("baba")},baba:function(e,t,r){},f8b7:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s}));var o=r("1bab");function a(e){return Object(o["a"])({url:"/PostOrderData",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/GetOrderDataAll",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/GetOrderDataOne",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-3fd7363a.03e3d3ac.js.map